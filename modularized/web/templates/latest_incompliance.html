<!-- latest_incompliance.html -->
<style>
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }

    #latest-image-container {
        width: 100vw;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #000;
    }

    #latest-image {
        max-width: 100vw;
        max-height: 100vh;
        width: auto;
        height: auto;
        object-fit: contain;
        display: block;
        margin: auto;
    }
</style>

<div id="latest-image-container">
    {% if image_url %}
        {% for url, time in image_url %}
            <img src="{{ url_for('static', filename=url) }}" alt="Latest incompliance">
        {% endfor %}
    {% else %}
    <p style="color: white;">No incompliance images found.</p>
    {% endif %}
</div>

<script>
    function fetchLatestImage() {
        fetch('/latest_incompliance')
            .then(response => response.text())
            .then(html => {
                document.getElementById('latest-image-container').innerHTML = html;
            });
    }

    // Poll every 5 seconds
    setInterval(fetchLatestImage, 5000);
</script>