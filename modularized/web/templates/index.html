{% extends 'base.html' %}
{% block title %}Live Feed - LabComply{% endblock %}
{% block content %}

<h2 class="mb-2">Live Feed Overview</h2>

{% if lab_name %}
<div class="alert alert-info">
    Viewing Lab: <strong>{{ lab_name }}</strong>
</div>
{% else %}
<div class="alert alert-warning">
    No lab selected. Please select a lab from the sidebar.
</div>
{% endif %}

{# Display live camera feeds #}
{% if cameras and cameras|length > 0 %}
<div class="row">
    {% for camera in cameras %}
    <div class="col-md-4 mb-4">
        <div class="card shadow-sm">
            <div class="card-header bg-dark text-white">
                <h6 class="mb-0">{{ camera.name }}</h6>
            </div>
            <img src="{{ url_for('video_feed', camera_id=camera.camera_id) }}" class="card-img-top"
                alt="Live feed {{ camera.name }}" style="height: 300px; object-fit: fill;">
            <div class="card-body">
                <a href="{{ url_for('all_incompliance', lab=lab_name, camera=camera.name) }}"
                    class="btn btn-primary btn-sm">
                    View Incompliances
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-secondary">
    No cameras available for this lab.
</div>
{% endif %}

{% endblock %}