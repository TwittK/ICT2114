{% extends 'base.html' %}
{% block title %}Detection Search - LabComply+{% endblock %}
{% block content %}

<h2 class="mb-2">Detection Search</h2>
<h5 class="mb-4 text-muted">E2-L6-016 Camera 1</h5>

<form method="post" class="row g-3 align-items-end mb-4">
  <div class="col-md-4">
    <label for="date" class="form-label">Date Time:</label>
    <input type="datetime-local" class="form-control rounded-pill" name="date" id="date">
  </div>

  <div class="col-md-4">
    <label for="object_type" class="form-label">In-Compliance Type:</label>
    <select name="object_type" class="form-select rounded-pill">
      <option value="">Select Type</option>
      <option value="Food / Drink">Food / Drink</option>
      <option value="Mask">Mask</option>
      <option value="Unauthorized Access">Unauthorized Access</option>
    </select>
  </div>

  <div class="col-md-2">
    <button type="submit" class="btn btn-dark rounded-pill px-4">Search</button>
  </div>
</form>

{% if results %}
  <h4 class="mb-3">Results:</h4>
  <div class="row">
    {% for row in results %}
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm">
        <img src="{{ url_for('static', filename='snapshots/' + row[3].split('/')[-1]) }}" class="card-img-top" alt="Snapshot">
        <div class="card-body">
          <h6 class="card-title">{{ row[1] }} <small class="text-muted">(Confidence: {{ row[2] }})</small></h6>
          <p class="card-text text-muted">{{ row[0] }}</p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
{% endif %}

{% endblock %}
